<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>インタラクティブ学習カリキュラム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
        - Curriculum Structure (Chapters/Units): Goal: Organize & Navigate. Method: Interactive sidebar (JS for click events, dynamic content loading), main content display area. Interaction: Click to select chapter/unit, click to expand/collapse sections. Justification: Follows standard e-learning UX, easy to scan and drill down. Library/Method: HTML, Tailwind, Vanilla JS.
        - Unit Details (Goal, Topics, Explanation, Hint): Goal: Inform. Method: Structured text blocks using headings, lists, paragraphs. Topics/Explanation/Hint sections are collapsible using <details> and <summary>. Interaction: Click to expand/collapse. Justification: Improves readability by breaking down information. Library/Method: HTML, Tailwind, Vanilla JS.
        - Code Snippets (from Exercise Hints/Explanations): Goal: Illustrate. Method: Styled `<pre><code>` blocks. Interaction: None (static display). Justification: Clear presentation of code. Library/Method: HTML, Tailwind.
        - Sample Charts (for Matplotlib units): Goal: Illustrate. Method: Use Chart.js to render simple examples of bar, scatter, histogram based on Exercise Hints. Interaction: Static display. Justification: Provides visual context for Matplotlib exercises without requiring external execution. Library/Method: Chart.js, Vanilla JS for data setup.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .sidebar {
            min-width: 280px;
            width: 25%;
            max-width: 320px;
        }
        .main-content {
            width: 75%;
        }
        details > summary {
            cursor: pointer;
            list-style: none; /* Firefox */
        }
        details > summary::-webkit-details-marker {
            display: none; /* Chrome/Safari */
        }
        details > summary::before {
            content: '▶ ';
            font-size: 0.8em;
            margin-right: 0.3rem;
        }
        details[open] > summary::before {
            content: '▼ ';
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-left: 3px solid #4A90E2;
            color: #333;
            page-break-inside: avoid;
            font-family: monospace;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 1.6em;
            max-width: 100%;
            overflow: auto;
            padding: 1em 1.5em;
            display: block;
            word-wrap: break-word;
            border-radius: 0.375rem;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-stone-100 text-stone-800 flex flex-col min-h-screen" style="font-family: 'Noto Sans JP', sans-serif;">

    <header class="bg-teal-700 text-white p-4 shadow-md sticky top-0 z-50">
        <h1 class="text-2xl font-bold">インタラクティブ学習カリキュラム 📖</h1>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <nav id="sidebar" class="sidebar bg-stone-200 p-5 overflow-y-auto h-[calc(100vh-64px)] sticky top-[64px]">
            <ul id="curriculum-nav" class="space-y-2"></ul>
        </nav>

        <main id="main-content-area" class="main-content p-8 overflow-y-auto h-[calc(100vh-64px)]">
            <div id="content-placeholder">
                <h2 class="text-3xl font-bold text-teal-700 mb-4">ようこそ！</h2>
                <p class="text-lg">左のナビゲーションから学習したい章やユニットを選択してください。</p>
                <p class="mt-2">このアプリケーションは、提供された学習カリキュラムをインタラクティブに探索するためのものです。各章の概要やユニットごとの詳細な学習内容（目標、主要トピック、解説、演習のヒント）を効率的に確認できます。</p>
            </div>
        </main>
    </div>

<script>
const curriculumData = {
    introduction: {
        title: "はじめに",
        content: `このカリキュラムは、Jupyter Notebookの操作から始め、Pythonプログラミングの基礎、そして数学・機械学習ライブラリであるpandas, NumPy, Matplotlib, scikit-learn, PyTorchの基本的な使い方を段階的に習得することを目的としています。各章は複数の単元で構成され、1単元あたり約15分で完了できるように設計されています。このカリキュラムを通じて、データサイエンスと機械学習の実践的なスキルを身につけるための強固な土台を構築します。OSはWindowsを前提とし、Jupyter Notebookはインストール済みであるとします。`
    },
    chapters: [
        {
            title: "第1章: Jupyter Notebookの使い方",
            summary: "この章では、データサイエンスプロジェクトの対話的な開発と提示に非常に強力なツールであるJupyter Notebookの基本的な使い方を学びます。Jupyter Notebookは、コード、視覚化、説明文、その他のリッチメディアを単一のドキュメントに組み合わせることで、一貫性のある表現豊かなワークフローを作成します。この章を通じて、ノートブックの作成、セルの操作、Markdown記法、カーネル管理など、Jupyter Notebookを効果的に使用するための基礎を習得します。",
            units: [
                { title: "Unit 1.1: Jupyter Notebookとは？", goal: "Jupyter Notebookの概要、特徴、利点を理解する。", topics: ["Jupyter Notebookの定義：対話型コンピューティング環境 [1]。", "主な特徴：コード、テキスト、数式、視覚化を混在可能 。", "利点：試行錯誤の容易さ、結果の再現性、教育・プレゼンテーションへの活用 [1]。", "データサイエンスにおける役割：データの探索、分析、モデル開発、結果共有 。"], explanation: "Jupyter Notebookは、ライブコード、方程式、視覚化、説明テキストを含むドキュメントを作成し共有できるオープンソースのウェブアプリケーションです 。データサイエンティストがデータをクリーンアップし、変換し、数値シミュレーションを実行し、統計モデリングを行い、機械学習モデルを訓練し、その結果を共有するための包括的なプラットフォームを提供します。特に対話的にコードを実行し、その結果を即座に確認できるため、探索的データ分析やアルゴリズムの試行錯誤に適しています。", exerciseHint: "Jupyter Notebookで作成された優れた分析レポートの例をオンラインで検索し、どのような要素で構成されているか観察する。" },
                { title: "Unit 1.2: Jupyter Notebookの起動と画面構成", goal: "Jupyter Notebookを起動し、基本的な画面構成を理解する。", topics: ["Windowsでの起動方法：Anaconda Navigator経由、またはコマンドプロンプト/Anaconda Promptで `jupyter notebook` と入力 [1, 3]。", "起動後のダッシュボード画面：ファイルブラウザ、ディレクトリ構造の表示 。", "主要なUI要素：`New`ボタン（新規ノートブック作成、フォルダ作成など）、`Upload`ボタン 。", "ノートブックファイル (`.ipynb`ファイル) の概念 [1]。"], explanation: "Jupyter Notebookを起動すると、デフォルトのウェブブラウザでダッシュボードが開きます [1]。このダッシュボードは、ファイルやフォルダを管理するインターフェースです。ここから新しいノートブックを作成したり、既存のノートブックを開いたり、新しいフォルダを作成したりできます [3]。各ノートブックは `.ipynb` という拡張子のファイルとして保存され、これはノートブックの内容をJSON形式で記述したテキストファイルです [1]。このファイル形式により、ノートブックの共有やバージョン管理が容易になります。", exerciseHint: "Jupyter Notebookを起動し、ダッシュボード画面で新しいフォルダを作成し、そのフォルダ内に移動する。" },
                { title: "Unit 1.3: セルの種類と基本操作", goal: "Jupyter Notebookの主要なセルタイプ（コードセル、Markdownセル）とその基本的な使い方を理解する。", topics: ["セルの概念：コードやテキストを記述するブロック [1]。", "コードセル (Code Cell)：Pythonコード（または他のサポート言語のコード）を実行するためのセル [1]。\n    - 簡単なコードの入力と実行 (`Run`ボタンまたは `Ctrl + Enter`)。\n    - `In [ ]:` (入力) と `Out [ ]:` (出力) の表示の意味 [1]。", "Markdownセル (Markdown Cell)：Markdown記法を使って整形されたテキストや説明文を記述するためのセル [1]。\n    - 簡単なMarkdownテキストの入力とレンダリング。"], explanation: "Jupyter Notebookの中心的な要素は「セル」です。セルには主に「コードセル」と「Markdownセル」の2種類があります [1]。コードセルには実行可能なコードを記述し、実行するとその結果がセルの直下に表示されます。例えば、`print('Hello World!')` と入力して実行すると、`Hello World!` という出力が得られます [1]。Markdownセルには、見出し、リスト、太字、リンクなどを含む整形されたテキストを記述でき、実行するとHTMLとしてレンダリングされます。この2つのセルを組み合わせることで、分析コードとその説明、結果を一体化したドキュメントを作成できます。新しいノートブックの最初のセルはデフォルトでコードセルになっています [1]。", exerciseHint: "新しいノートブックを作成し、コードセルに `1 + 1` と入力して実行する。次に、新しいセルをMarkdownセルに変更し、`# これは見出しです` と入力して実行する。" },
                { title: "Unit 1.4: ノートブックの操作 (ファイル操作、セル操作)", goal: "ノートブックの保存、セルの追加・削除・移動などの基本的な操作を習得する。", topics: ["ファイル操作：\n    - 新規ノートブックの作成 (`File` > `New Notebook` またはダッシュボードから)。\n    - ノートブックの保存 (ツールバーの保存アイコン、`Ctrl + S`) [4]。\n    - ノートブックの複製、名前の変更、削除 (ダッシュボード画面でファイルを選択して操作) [4]。", "セル操作 (主にツールバーを使用)：\n    - セルの追加 (選択セルの上下に挿入) [4]。\n    - セルの削除 [4]。\n    - セルのコピーと貼り付け [4]。\n    - セルの移動 (上下) [4]。\n    - 選択セルの実行 [4]。\n    - セルタイプの変更 (Code, Markdownなど) [4]。"], explanation: "Jupyter Notebookのツールバーには、ノートブックやセルを操作するための様々なボタンが用意されています [4]。例えば、フロッピーディスクのアイコンでノートブックを保存したり、プラス記号のアイコンで新しいセルを追加したりできます。選択したセルを削除、コピー、貼り付けする機能や、セルの順番を上下に入れ替える機能もツールバーからアクセスできます。これらの操作を覚えることで、ノートブックの編集がスムーズに行えるようになります。", exerciseHint: "複数のセル（コードセルとMarkdownセルを混在）を作成し、セルの追加、削除、コピー、移動、保存といった一連の操作をツールバーを使って行う。" },
                { title: "Unit 1.5: Markdown記法入門", goal: "Jupyter Notebook内で説明文やドキュメントを記述するために、基本的なMarkdown記法を習得する。", topics: ["Markdownとは：軽量マークアップ言語。", "見出し：`#` の数でレベルを指定 (例: `# H1`, `## H2`)。", "リスト：番号なしリスト (`-`, `*`)、番号付きリスト (`1.`, `2.`)。", "文字装飾：太字 (`**text**` or `__text__`)、イタリック (`*text*` or `_text_`)。", "リンク：`[表示テキスト](URL)`。", "(補足) LaTeXによる数式表現：`$formula$` (インライン)、`$$formula$$` (ディスプレイ) [2]。"], explanation: "Markdownは、プレーンテキストで書かれた文書からHTMLなどの形式に変換するために設計された軽量マークアップ言語です。Jupyter NotebookのMarkdownセルでは、このMarkdown記法を用いて、分析コードに対する説明、考察、レポートなどを記述することができます [2, 5]。見出しを使って文書構造を明確にしたり、リストを使って情報を整理したり、太字やイタリックで特定の語句を強調したりすることが容易に行えます。また、数式を記述するためのLaTeXもサポートされており [2]、科学技術計算のレポート作成にも適しています。Markdownを効果的に使用することで、コードだけでなく、その背景や解釈も含む、非常に分かりやすいノートブックを作成できます。これは、データサイエンティストが分析のストーリーを語る上で重要なスキルとなります [2]。", exerciseHint: "Markdownセルに見出し、リスト（番号なし・番号付き）、太字・イタリックのテキスト、簡単な数式（例: $E=mc^2$）を含む説明文を作成する。" },
                { title: "Unit 1.6: カーネルの役割と管理", goal: "カーネルの役割を理解し、再起動や割り込みなどの基本的な管理操作を行えるようになる。", topics: ["カーネルとは：「計算エンジン」、コードを実行する脳 [1]。", "カーネルの主な操作 (Kernelメニューまたはツールバーから)：\n    - Interrupt (実行中のセルを停止) [4]。\n    - Restart (カーネルを再起動し、変数をリセット) [4]。\n    - Restart & Clear Output (カーネルを再起動し、全セルの出力をクリア)。\n    - Restart & Run All (カーネルを再起動し、全セルを先頭から順に実行)。", "カーネルがビジー状態のときの表示 (例: アスタリスク `In [*]:`)。"], explanation: "Jupyter Notebookにおけるカーネルは、実際にコードを実行する「計算エンジン」です [1]。ノートブックでコードセルを実行すると、そのコードがカーネルに送られ、カーネルが計算処理を行い、結果を返します。長時間かかる計算の途中で処理を中断したい場合や、何らかの理由でカーネルが応答しなくなった場合には、「Interrupt」操作で実行を停止できます [4]。また、定義した変数やインポートしたライブラリの状態を一度リセットしたい場合には、「Restart」操作を行います [4]。これにより、カーネルは初期状態に戻ります。カーネルの適切な管理は、特に複雑な計算やデバッグを行う際に重要となり、ノートブックの動作の安定性と再現性を保つために不可欠です。", exerciseHint: "無限ループするようなコードセル（例: `while True: pass`）を実行し、Interrupt Kernelで停止してみる。変数をいくつか定義した後、Restart Kernelでそれらの変数がリセットされることを確認する。" },
                { title: "Unit 1.7: キーボードショートカットと効率的な操作", goal: "主要なキーボードショートカットを覚え、Jupyter Notebookの操作を効率化する。", topics: ["コマンドモード (青枠、`Esc`キーで移行) と編集モード (緑枠、`Enter`キーで移行) の切り替え [1]。", "コマンドモードでの操作：\n    - セルの上下移動 (`Up`/`Down`キー, または `J`/`K`キー) [1, 6]。\n    - セルの挿入 (`A`: 選択セルの上に挿入, `B`: 選択セルの下に挿入) [1, 6]。\n    - セルの削除 (`D`キーを2回) [6]。\n    - セルタイプ変更 (`M`: Markdownセルへ, `Y`: コードセルへ) [6]。", "編集モードでの操作：\n    - セルの実行 (`Ctrl + Enter`: その場で実行, `Shift + Enter`: 実行して下のセルへ移動または新規作成)。[1]", "その他の便利なショートカット (ツールバーのコマンドパレットで確認可能) [4]。"], explanation: "Jupyter Notebookには多数のキーボードショートカットが用意されており、これらを活用することでマウス操作を減らし、作業効率を大幅に向上させることができます [1, 6]。まず重要なのは、「コマンドモード」と「編集モード」の2つのモードの存在を理解することです。セルが青枠で選択されている状態がコマンドモードで、セル全体に対する操作（移動、コピー、削除、挿入など）を行います。セルが緑枠で、セル内にカーソルがある状態が編集モードで、セル内のコードやテキストを編集します。`Esc`キーでコマンドモードに、`Enter`キーで編集モードに移行します [1]。これらのショートカットを習熟することで、より迅速かつスムーズにノートブックを操作できるようになり、思考を中断することなく分析作業に集中できます。", exerciseHint: "ユニット1.4で学んだセル操作（追加、削除、コピー、移動、実行）を、キーボードショートカットのみで行ってみる。" },
                { title: "Unit 1.8: 簡単なデータ分析フロー体験", goal: "Jupyter Notebookを使って、簡単なデータ読み込み、処理、可視化という一連の流れを体験する。", topics: ["サンプルデータの準備 (簡単なPythonのリストや辞書からpandas DataFrameを作成する例を示す – pandasの詳細は第3章)。", "データの確認 (print文、DataFrameの `head()` メソッドなど)。", "簡単なデータ操作 (特定の列の選択、簡単な計算など)。", "Matplotlibを使った簡単なグラフ描画 (棒グラフや折れ線グラフの初歩 – Matplotlibの詳細は第5章)。", "Markdownセルでの考察の記述。"], explanation: "このユニットでは、これまでに学んだJupyter Notebookの機能を統合し、データ分析の非常に基本的な流れを体験します 。具体的には、少量のサンプルデータ（例えば、数日間の気温や簡単なアンケート結果を模したもの）をノートブック内で作成し、その内容を確認します。次に、データから平均値を計算するなどの簡単な処理を行い、その結果をMatplotlibライブラリ（詳細は後述）を使ってグラフで視覚化します。最後に、得られた結果やグラフについて、Markdownセルを用いて簡単な考察を記述します。この一連の作業を通じて、Jupyter Notebookがデータ分析の各段階（データの準備、処理、可視化、解釈、報告）をどのようにサポートするかを実感することができます。この体験は、後続の章で学ぶより高度なライブラリの必要性や有用性を理解する上で役立ちます。", exerciseHint: "身近な題材（例：1週間の勉強時間、好きな果物のアンケート結果など）で小さなデータセットをPythonのリストや辞書で作成し、簡単な集計（合計や平均など）を行い、その結果を簡単な棒グラフで表示し、結果に関する短いコメントをMarkdownで記述する、という一連の流れを試す。" }
            ]
        },
        {
            title: "第2章: Pythonの基礎",
            summary: "この章では、データサイエンスと機械学習の分野で広く使われるプログラミング言語であるPythonの基礎を学びます。Pythonはその読みやすい構文と豊富なライブラリにより、データ分析、機械学習モデル構築、その他多くの科学技術計算タスクに最適な言語とされています。この章を通じて、変数、データ型、制御構造、関数といったプログラミングの基本的な概念をPythonで扱えるようになることを目指します。",
            units: [
                { title: "Unit 2.1: Pythonとは？データサイエンスにおける役割", goal: "Python言語の概要と、データサイエンス分野で広く利用されている理由を理解する。", topics: ["Python言語の特徴：汎用性、高い可読性、豊富な標準ライブラリとサードパーティライブラリ [9, 11]。", "データサイエンスにおけるPython：データ収集、前処理、分析、可視化、機械学習モデル構築まで幅広く対応 。", "主要なデータサイエンスライブラリの紹介 (pandas, NumPy, Matplotlib, scikit-learn, PyTorchなど、後の章で詳述) [7, 9]。"], explanation: "Pythonは、Guido van Rossum氏によって開発された、シンプルで読みやすい構文を持つ汎用プログラミング言語です。その設計哲学はコードの可読性を重視しており、初心者にも比較的習得しやすいとされています [11]。データサイエンス分野では、データ処理ライブラリpandas、数値計算ライブラリNumPy、可視化ライブラリMatplotlib、機械学習ライブラリscikit-learn、深層学習フレームワークPyTorchといった強力なオープンソースライブラリがPython上で開発されており、これらがPythonの普及を大きく後押ししています 。これらのライブラリを活用することで、データ収集から分析、モデル構築、結果の報告まで、データサイエンスのワークフロー全体をPythonで一貫して行うことが可能です。", exerciseHint: "Pythonがデータサイエンス以外にどのような分野（例：Web開発、自動化、ゲーム開発など）で活用されているか、具体的な事例をウェブで検索してみる。" },
                { title: "Unit 2.2: 変数とデータ型 (数値、文字列、ブール値)", goal: "変数の概念を理解し、Pythonの基本的なデータ型（整数、浮動小数点数、文字列、ブール値）を扱えるようになる。", topics: ["変数：データを格納するための名前付きの入れ物 (例: `age = 30`)。", "データ型：\n    - 数値型：整数 (`int` 例: `10`, `-5`)、浮動小数点数 (`float` 例: `3.14`, `-0.5`) [8, 12]。\n    - 文字列型 (`str`)：テキストデータ。シングルクォート (`'...'`)またはダブルクォート (`\"...\"`)で囲む (例: `'hello'`, `\"world\"`) [8, 12]。\n    - ブール型 (`bool`)：真 (`True`) と偽 (`False`) の2つの値のみ [8, 12]。", "`type()`関数によるデータ型の確認 (例: `type(age)`)。"], explanation: "プログラミングにおいて、変数とはデータに名前を付けて保存しておくためのものです。Pythonでは、変数を使用する前に型を明示的に宣言する必要はなく（動的型付け）、代入された値に応じて自動的に型が決定されます。主要な基本データ型には、整数や小数を扱う数値型、文字の並びである文字列型、そして真偽値を表すブール型があります [8, 12]。これらのデータ型を理解し、適切に使い分けることは、プログラミングの基本です。", exerciseHint: "自分の名前（文字列）、年齢（整数）、身長（浮動小数点数、メートル単位）、プログラミング経験の有無（ブール値）を変数に代入し、それぞれの値を`print()`関数で表示し、`type()`関数で型を確認する。" },
                { title: "Unit 2.11: 簡単なファイル入出力", goal: "テキストファイルの基本的な読み書き操作をPythonで行えるようになる。", topics: ["`open()`関数によるファイルのオープン：\n    - モード指定：`'r'` (読み込み専用、デフォルト)、`'w'` (書き込み専用、ファイルが存在すれば上書き)、`'a'` (追記、ファイルが存在すれば末尾に追加)。", "`with`文を使った安全なファイル操作：ブロック終了時に自動的にファイルをクローズする。\n    - 例: `with open('myfile.txt', 'r') as f:`", "ファイルの読み込みメソッド：\n    - `read()`: ファイル全体を一つの文字列として読み込む。\n    - `readline()`: ファイルから1行ずつ読み込む。\n    - `readlines()`: ファイル全体を1行ごとの文字列のリストとして読み込む。", "ファイルへの書き込みメソッド：`write()`。"], explanation: "データ分析では、外部ファイルからデータを読み込んだり、分析結果をファイルに出力したりする場面が頻繁にあります。Pythonの組み込み関数`open()`を使うことで、テキストファイルの基本的な読み書きが可能です [8, 10]。ファイルを扱う際には、`with`文を使用することが推奨されます。これにより、ファイル操作が終了した後（またはエラーが発生した場合でも）、ファイルが自動的に正しくクローズされるため、リソースリークを防ぐことができます。", exerciseHint: "Jupyter Notebookと同じディレクトリに、数行のテキストを含む `sample.txt` という名前のファイルを手動で作成する。Pythonでこのファイルを読み込み、内容を`print()`で表示する。次に、Pythonから `output.txt` という新しいファイルに自分の名前と今日の日付を書き込むプログラムを作成し、ファイルが正しく作成されているか確認する。" },
                { title: "Unit 2.12: エラーと例外処理の初歩 (try, except)", goal: "Pythonにおけるエラーの種類を理解し、`try-except`ブロックを使った基本的な例外処理を記述できるようになる。", topics: ["エラーの種類：\n    - 構文エラー (SyntaxError)：Pythonの文法に誤りがある場合に発生。プログラム実行前に検出される。\n    - 実行時エラー (例外, Exception)：プログラム実行中に発生するエラー。", "代表的な例外の例：`TypeError` (不適切な型のデータ操作)、`ValueError` (不適切な値)、`IndexError` (リスト等の範囲外アクセス)、`KeyError` (辞書の存在しないキーへのアクセス)、`FileNotFoundError` (存在しないファイルを開こうとした)。", "`try-except`文：エラーが発生する可能性のあるコードを`try`ブロックに記述し、エラーが発生した場合の処理を`except`ブロックに記述する。", "特定の例外の捕捉：`except ValueError:` のように、特定の例外タイプを指定して捕捉する。"], explanation: "プログラムを書いていると、様々なエラーに遭遇します。Pythonでは、文法的な誤りである「構文エラー」と、実行中に発生する「例外」があります [13]。例外が発生するとプログラムは通常そこで停止してしまいますが、`try-except`文を用いることで、例外を「捕捉」し、プログラムがクラッシュするのを防いだり、エラーに応じた適切な処理を行ったりすることができます。", exerciseHint: "ユーザーに数値を入力させ、その数値で10を割るプログラムを作成する。ユーザーが0を入力した場合（`ZeroDivisionError`）や、数値以外の文字を入力した場合（`ValueError`）に、それぞれ適切なエラーメッセージを表示するように`try-except`ブロックで処理する。" }
            ]
        },
        {
            title: "第5章: Matplotlib基礎",
            summary: "この章では、Pythonで静的、アニメーション、対話的な視覚化を作成するための包括的なライブラリであるMatplotlibの基礎を学びます。データ分析の結果を他者に伝えたり、データに潜むパターンや傾向を自身で理解したりするためには、データの視覚化が不可欠です。Matplotlibは、折れ線グラフ、棒グラフ、散布図、ヒストグラムなど、様々な種類のグラフを柔軟に描画する機能を提供します。",
            units: [
                {
                    title: "Unit 5.3: 棒グラフ、散布図、ヒストグラムの作成",
                    goal: "棒グラフ (`plt.bar()`)、散布図 (`plt.scatter()`)、ヒストグラム (`plt.hist()`) を作成できるようになる。",
                    topics: [
                        "棒グラフ (`plt.bar(x, height)`)：カテゴリ間の量を比較 [26]。\n    - `x`: カテゴリの位置、`height`: 各棒の高さ。",
                        "散布図 (`plt.scatter(x, y)`)：2つの量的変数の関係性、相関の有無などを視覚化 [26]。",
                        "ヒストグラム (`plt.hist(data, bins=N)`)：量的データの分布形状（度数分布）を視覚化 [26]。\n    - `data`: 1次元のデータ配列、`bins`: ビン（階級）の数または境界値。"
                    ],
                    explanation: "Matplotlibでは折れ線グラフ以外にも様々な種類の基本的なグラフを簡単に作成できます。棒グラフはカテゴリごとの数量比較に、散布図は2変数の関係性把握に、ヒストグラムは単一データの分布確認に適しています。",
                    exerciseHint: "いくつかのカテゴリ名とその値を持つデータから棒グラフを作成する。2つの相関がありそうな量的データをNumPyの乱数で生成し、散布図で表示する。正規分布に従う乱数を1000個生成し、ヒストグラムでその分布を表示する。",
                    chartConfigs: [
                        {
                            id: 'barChartExample',
                            type: 'bar',
                            data: {
                                labels: ['カテゴリA', 'カテゴリB', 'カテゴリC', 'カテゴリD'],
                                datasets: [{
                                    label: 'サンプル値',
                                    data: [12, 19, 3, 5],
                                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                                    borderColor: 'rgba(75, 192, 192, 1)',
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: { y: { beginAtZero: true } },
                                plugins: { legend: { display: true } }
                            },
                            title: "棒グラフの例"
                        },
                        {
                            id: 'scatterPlotExample',
                            type: 'scatter',
                            data: {
                                datasets: [{
                                    label: 'サンプル散布図',
                                    data: Array.from({length: 50}, () => ({x: Math.random()*10, y: Math.random()*10 + Math.random()*5})),
                                    backgroundColor: 'rgba(255, 99, 132, 0.6)',
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: { x: { type: 'linear', position: 'bottom' }, y: { beginAtZero: true } },
                                plugins: { legend: { display: true } }
                            },
                            title: "散布図の例"
                        },
                        {
                            id: 'histogramExample',
                            type: 'bar', // Chart.jsでヒストグラムを表現するには棒グラフを使う
                            data: {
                                labels: ['0-2', '2-4', '4-6', '6-8', '8-10'], // 仮のビン
                                datasets: [{
                                    label: 'サンプルヒストグラム (正規分布風)',
                                    data: [50, 200, 300, 200, 50], // 仮の度数
                                    backgroundColor: 'rgba(153, 102, 255, 0.6)',
                                    borderColor: 'rgba(153, 102, 255, 1)',
                                    borderWidth: 1
                                }]
                            },
                             options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: { y: { beginAtZero: true }, x: { categoryPercentage: 1.0, barPercentage: 1.0 } },
                                plugins: { legend: { display: true } }
                            },
                            title: "ヒストグラムの例"
                        }
                    ]
                }
            ]
        }
    ],
    conclusion: {
        title: "まとめと今後の学習に向けて",
        content: `このカリキュラムでは、Jupyter Notebookの基本的な操作から始まり、データサイエンスのためのPythonの基礎、そしてpandas、NumPy、Matplotlibといったデータ処理・可視化ライブラリ、さらには機械学習ライブラリscikit-learn、深層学習フレームワークPyTorchの初歩までを網羅的に学びました。\n\n各章で習得した知識とスキルは、それぞれが独立しているだけでなく、相互に深く関連し合っています。このカリキュラムで扱った内容は、各ライブラリの広大な機能のごく一部に過ぎません。しかし、ここで得た基礎知識は、より高度なトピックや専門的な応用に進むための確かな足がかりとなるはずです。\n\nデータサイエンスと機械学習の分野は日進月歩で進化していますが、本カリキュラムで習得した基礎的な概念とツールを扱う能力は、その変化に対応していく上での普遍的な力となるでしょう。継続的な学習と実践を通じて、データから価値を生み出す能力を高めていってください。`
    }
};

const navElement = document.getElementById('curriculum-nav');
const mainContentArea = document.getElementById('main-content-area');
const contentPlaceholder = document.getElementById('content-placeholder');
let currentCharts = [];

function buildNavigation() {
    const introLi = document.createElement('li');
    const introLink = document.createElement('a');
    introLink.href = '#';
    introLink.textContent = curriculumData.introduction.title;
    introLink.className = 'block py-2 px-3 rounded hover:bg-teal-600 hover:text-white transition-colors';
    introLink.onclick = (e) => {
        e.preventDefault();
        displayIntroduction();
        setActiveLink(introLink);
    };
    introLi.appendChild(introLink);
    navElement.appendChild(introLi);

    curriculumData.chapters.forEach((chapter, chapterIndex) => {
        const chapterLi = document.createElement('li');
        const chapterTitle = document.createElement('div');
        chapterTitle.textContent = chapter.title;
        chapterTitle.className = 'font-semibold py-2 px-3 rounded cursor-pointer hover:bg-teal-600 hover:text-white transition-colors';
        chapterLi.appendChild(chapterTitle);

        const unitsUl = document.createElement('ul');
        unitsUl.className = 'ml-4 mt-1 space-y-1 hidden'; // Initially hidden

        chapter.units.forEach((unit, unitIndex) => {
            const unitLi = document.createElement('li');
            const unitLink = document.createElement('a');
            unitLink.href = '#';
            unitLink.textContent = unit.title;
            unitLink.className = 'block py-1 px-2 text-sm rounded hover:bg-teal-500 hover:text-white transition-colors';
            unitLink.onclick = (e) => {
                e.preventDefault();
                displayUnitContent(chapterIndex, unitIndex);
                setActiveLink(unitLink);
            };
            unitLi.appendChild(unitLink);
            unitsUl.appendChild(unitLi);
        });

        chapterLi.appendChild(unitsUl);
        navElement.appendChild(chapterLi);

        chapterTitle.onclick = () => {
            unitsUl.classList.toggle('hidden');
            chapterTitle.classList.toggle('bg-teal-600');
            chapterTitle.classList.toggle('text-white');
            if (!unitsUl.classList.contains('hidden')) {
                displayChapterSummary(chapterIndex);
                setActiveLink(chapterTitle); // Keep chapter title active if summary is shown
            }
        };
    });

    const conclusionLi = document.createElement('li');
    const conclusionLink = document.createElement('a');
    conclusionLink.href = '#';
    conclusionLink.textContent = curriculumData.conclusion.title;
    conclusionLink.className = 'block py-2 px-3 rounded hover:bg-teal-600 hover:text-white transition-colors';
    conclusionLink.onclick = (e) => {
        e.preventDefault();
        displayConclusion();
        setActiveLink(conclusionLink);
    };
    conclusionLi.appendChild(conclusionLink);
    navElement.appendChild(conclusionLi);
}

function setActiveLink(activeElement) {
    document.querySelectorAll('#curriculum-nav a, #curriculum-nav div[onclick]').forEach(el => {
        el.classList.remove('bg-teal-700', 'text-white', 'font-bold');
        if (el.parentElement.tagName === 'LI' && el.parentElement.parentElement.id === 'curriculum-nav') { // Chapter titles
             el.classList.remove('bg-teal-600'); // remove chapter title specific active style
        }
    });
    activeElement.classList.add('bg-teal-700', 'text-white', 'font-bold');
     if (activeElement.parentElement.tagName === 'LI' && activeElement.parentElement.parentElement.id === 'curriculum-nav' && activeElement.nextElementSibling && activeElement.nextElementSibling.tagName === 'UL') { // Chapter title
        activeElement.classList.add('bg-teal-600'); // Special active style for chapter title
        activeElement.classList.remove('bg-teal-700');
    }
}


function clearPreviousCharts() {
    currentCharts.forEach(chart => chart.destroy());
    currentCharts = [];
}

function displayIntroduction() {
    clearPreviousCharts();
    contentPlaceholder.innerHTML = `
        <h2 class="text-3xl font-bold text-teal-700 mb-4">${curriculumData.introduction.title}</h2>
        <div class="prose max-w-none">${curriculumData.introduction.content.replace(/\n/g, '<br>')}</div>
    `;
}

function displayChapterSummary(chapterIndex) {
    clearPreviousCharts();
    const chapter = curriculumData.chapters[chapterIndex];
    contentPlaceholder.innerHTML = `
        <h2 class="text-3xl font-bold text-teal-700 mb-4">${chapter.title}</h2>
        <p class="text-lg mb-6">${chapter.summary}</p>
        <h3 class="text-2xl font-semibold text-teal-600 mb-3">この章のユニット一覧：</h3>
        <ul class="list-disc pl-5 space-y-1">
            ${chapter.units.map((unit, unitIndex) => `<li><a href="#" onclick="event.preventDefault(); displayUnitContent(${chapterIndex}, ${unitIndex}); setActiveLink(document.querySelector('#curriculum-nav ul li ul li a[onclick*=\\"displayUnitContent(${chapterIndex}, ${unitIndex})\\"]'));" class="text-blue-600 hover:underline">${unit.title}</a></li>`).join('')}
        </ul>
    `;
}

function displayConclusion() {
    clearPreviousCharts();
    contentPlaceholder.innerHTML = `
        <h2 class="text-3xl font-bold text-teal-700 mb-4">${curriculumData.conclusion.title}</h2>
        <div class="prose max-w-none">${curriculumData.conclusion.content.replace(/\n/g, '<br>')}</div>
    `;
}

function formatTextWithCode(text) {
    // Basic regex to find backticks and replace with <code>, not handling nested or multiline
    // A more robust parser would be needed for complex cases
    // This will handle simple inline `code` examples.
    // For multiline, the Markdown input should ideally use <pre><code> or be structured.
    // The current data structure separates topics, so multi-line code is less likely in simple topic strings.
    // If present in explanation, it would need more careful handling or presumes HTML in source.
    // Given the source, it's mainly inline.
    return text.replace(/`([^`]+)`/g, '<code class="bg-stone-200 px-1 rounded text-sm font-mono text-red-700">$1</code>');
}

function displayUnitContent(chapterIndex, unitIndex) {
    clearPreviousCharts();
    const unit = curriculumData.chapters[chapterIndex].units[unitIndex];
    let topicsHtml = unit.topics.map(topic => `<li>${formatTextWithCode(topic)}</li>`).join('');
    // For multiline items within topics array (e.g. from Unit 1.3)
    topicsHtml = topicsHtml.replace(/\n\s*-/g, '<ul><li class="ml-4">').replace(/\n(?!<\/ul>)/g, '</li></ul><li class="ml-4">') // simplistic conversion, might need refinement
                  .replace(/<\/li><\/ul><li class="ml-4">/g, '</li><li class="ml-4">');


    contentPlaceholder.innerHTML = `
        <h2 class="text-3xl font-bold text-teal-700 mb-2">${unit.title}</h2>
        <hr class="mb-6">

        <section class="mb-6">
            <h3 class="text-xl font-semibold text-teal-600 mb-2">学習目標</h3>
            <p>${formatTextWithCode(unit.goal)}</p>
        </section>

        <section class="mb-6">
            <details class="bg-white p-4 rounded shadow">
                <summary class="text-xl font-semibold text-teal-600">主要トピック</summary>
                <ul class="list-disc pl-5 mt-2 space-y-1 prose max-w-none">
                    ${topicsHtml}
                </ul>
            </details>
        </section>

        <section class="mb-6">
            <details class="bg-white p-4 rounded shadow">
                <summary class="text-xl font-semibold text-teal-600">解説</summary>
                <div class="mt-2 prose max-w-none">${formatTextWithCode(unit.explanation).replace(/\n/g, '<br>')}</div>
            </details>
        </section>

        <section class="mb-6">
            <details class="bg-white p-4 rounded shadow">
                <summary class="text-xl font-semibold text-teal-600">演習のヒント</summary>
                <div class="mt-2 prose max-w-none">${formatTextWithCode(unit.exerciseHint).replace(/\n/g, '<br>')}</div>
            </details>
        </section>
        <div id="charts-area" class="mt-8 space-y-8"></div>
    `;

    if (unit.chartConfigs) {
        const chartsArea = document.getElementById('charts-area');
        unit.chartConfigs.forEach(config => {
            const chartWrapper = document.createElement('div');
            chartWrapper.className = 'bg-white p-4 rounded shadow';
            
            const chartTitleEl = document.createElement('h4');
            chartTitleEl.className = 'text-lg font-semibold text-teal-600 mb-3 text-center';
            chartTitleEl.textContent = config.title || 'サンプルグラフ';
            chartWrapper.appendChild(chartTitleEl);

            const chartContainer = document.createElement('div');
            chartContainer.className = 'chart-container';
            const canvas = document.createElement('canvas');
            canvas.id = config.id;
            chartContainer.appendChild(canvas);
            chartWrapper.appendChild(chartContainer);
            chartsArea.appendChild(chartWrapper);

            // Ensure options for Chart.js are well-defined
            const options = config.options || {};
            options.responsive = true;
            options.maintainAspectRatio = false;

            // Label wrapping logic for x-axis
            if (options.scales && options.scales.x && options.scales.x.ticks === undefined) {
                 options.scales.x.ticks = {};
            } else if (options.scales && options.scales.x === undefined) {
                 options.scales.x = { ticks: {} };
            } else if (options.scales === undefined) {
                options.scales = { x: { ticks: {} } };
            }
            
            options.scales.x.ticks.callback = function(value, index, values) {
                const label = this.getLabelForValue(value);
                if (typeof label === 'string' && label.length > 16) {
                    const parts = [];
                    for (let i = 0; i < label.length; i += 16) {
                        parts.push(label.substring(i, i + 16));
                    }
                    return parts;
                }
                return label;
            };
            
            // Label wrapping logic for y-axis (if needed)
            if (options.scales && options.scales.y && options.scales.y.ticks === undefined) {
                 options.scales.y.ticks = {};
            } else if (options.scales && options.scales.y === undefined) {
                 options.scales.y = { ticks: {} };
            } else if (options.scales === undefined && !options.scales.y) { // if scales exists but not y
                if(options.scales.x) options.scales.y = { ticks: {} };
                else options.scales = { y: { ticks: {} } }; // if scales doesn't exist at all
            }
             if (options.scales && options.scales.y && options.scales.y.ticks) {
                options.scales.y.ticks.callback = function(value, index, values) {
                    const label = this.getLabelForValue(value);
                    if (typeof label === 'string' && label.length > 16) {
                        const parts = [];
                        for (let i = 0; i < label.length; i += 16) {
                            parts.push(label.substring(i, i + 16));
                        }
                        return parts;
                    }
                    return label;
                };
            }


            const chart = new Chart(
                document.getElementById(config.id),
                {
                    type: config.type,
                    data: config.data,
                    options: options
                }
            );
            currentCharts.push(chart);
        });
    }
}


document.addEventListener('DOMContentLoaded', () => {
    buildNavigation();
    displayIntroduction(); // Show introduction by default
    const firstNavLink = document.querySelector('#curriculum-nav a');
    if (firstNavLink) {
        setActiveLink(firstNavLink);
    }
});

</script>
</body>
</html>
